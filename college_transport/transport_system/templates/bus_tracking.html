{% extends 'base.html' %}
{% block title %}Bus Tracking{% endblock %}
{% block content %}
<div class="map-container" style="text-align:center;">
    <h2>Real-Time Bus Tracking</h2>
    <div id="map" style="width: 100%; height: 500px; margin-top: 20px;"></div>
</div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDrI_o2YsZ4iE-wUytLaLFeYFBfwpRdNLk"></script>
<script>
    function initMap() {
        const college = { lat: 12.9132, lng: 77.5055 };
        const map = new google.maps.Map(document.getElementById("map"), {
            zoom: 13,
            center: college,
        });

        const busMarker = new google.maps.Marker({
            position: college,
            map: map,
            icon: "https://maps.google.com/mapfiles/kml/shapes/bus.png",
            title: "College Bus"
        });

        // Simulate bus moving every few seconds
        setInterval(() => {
            const newLat = college.lat + (Math.random() - 0.5) * 0.01;
            const newLng = college.lng + (Math.random() - 0.5) * 0.01;
            busMarker.setPosition({ lat: newLat, lng: newLng });
        }, 4000);
    }

    window.onload = initMap;
</script>
{% endblock %}